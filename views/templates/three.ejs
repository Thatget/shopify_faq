<div class="root-faq-template">
    <% if(setting.templateSetting.image_banner) {%>
        <div class="faq-header">
            <div>
                <% if(setting.data.page_title_content && setting.data.show_page_title) { %>
                    <h1 class="faq-page-title"><%- setting.data.page_title_content %></h1>
                <% } %>
                <% if(setting.data.show_page_title && setting.data.page_title_content){%>
                    <div class="faq-search">
                        <input class="faq-search-input" id="search-text" onkeyup="simpleSearch()" type="text" <% if(setting.data.search_placehoder) {%> placeholder="<%= setting.data.search_placehoder %>" <%}%> name="search">
                    </div>
                <%}
                else{%>
                    <div class="faq-search-no-title">
                        <input class="faq-search-input" id="search-text" onkeyup="simpleSearch()" type="text" <% if(setting.data.search_placehoder) {%> placeholder="<%= setting.data.search_placehoder %>" <%}%> name="search">
                    </div>
                <%} %>
            </div>
            <div>
                <% if(setting.data.show_intro_text && setting.data.intro_text_content) {%>
                    <div class="faq-intro-text">
                        <span><%- setting.data.intro_text_content %></span>
                    </div>
                <% } %>    
            </div>
        </div>
    <% }
    else{%>
        <div class="faq-header-3">
            <div>
                <% if(setting.data.page_title_content && setting.data.show_page_title) { %>
                    <h1 class="faq-page-title"><%- setting.data.page_title_content %></h1>
                <% } %>
                <% if(setting.data.show_page_title && setting.data.page_title_content){%>
                    <div class="faq-search">
                        <input class="faq-search-input" id="search-text" onkeyup="simpleSearch()" type="text" <% if(setting.data.search_placehoder) {%> placeholder="<%= setting.data.search_placehoder %>" <%}%> name="search">
                    </div>
                <%}
                else{%>
                    <div class="faq-search-no-title">
                        <input class="faq-search-input" id="search-text" onkeyup="simpleSearch()" type="text" <% if(setting.data.search_placehoder) {%> placeholder="<%= setting.data.search_placehoder %>" <%}%> name="search">
                    </div>
                <%} %>
            </div>
            <div>
                <% if(setting.data.show_intro_text && setting.data.intro_text_content) {%>
                    <div class="faq-intro-text">
                        <span><%- setting.data.intro_text_content %></span>
                    </div>
                <% } %>    
            </div>
        </div>
    <%} %>
    <div class="faq-main">
        <% if(faqs.length && !setting.data.dont_category_faq){ %>
            <div>
                <div class="container">
                    <% var faq_category = [] %>
                    <% var faq_category_count = 0 %>
                    <% for(var i=0; i < faqs.length; i++) { %>
                        <% let faq_category_content = {} %>
                        <% 
                        if(!faq_category.length){%>
                            <% faq_category_content.title = faqs[i].category_title %>
                            <% faq_category_content.identify = faqs[i].category_identify %>
                            <% faq_category_content.faqs = [{title:faqs[i].title,content:faqs[i].content}] %>
                            <% faq_category[faq_category_count] = faq_category_content %>
                        <% } 
                        else { %>
                            <% let checkExites = false %>
                            <% for(var j=0; j < faq_category.length; j++) { %>
                                <% if(faq_category[j].title === faqs[i].category_title){%>
                                    <% faq_category[j].faqs.push({title:faqs[i].title,content:faqs[i].content})%>
                                    <% checkExites = true %>
                                <% } %>
                            <% } %>
                            <% if(!checkExites){%>
                                <% faq_category_count++ %>
                                <% faq_category_content.title = faqs[i].category_title %>
                                <% faq_category_content.identify = faqs[i].category_identify %>
                                <% faq_category_content.faqs = [{title:faqs[i].title,content:faqs[i].content}] %>
                                <% faq_category[faq_category_count] = faq_category_content %>
                            <% } %> 
                        <% } %>
                    <% } %>
                    <% if(faq_category.length){%>
                        <div class="category-bar">
                            <% for(var i=0; i < faq_category.length; i++) { %>
								<div onclick="changeCategory('<%- faq_category[i].title %>')" class="category-bar-item" id="faq-category<%- faq_category[i].title %>" <% if(i === 0){%> style="word-break: break-word; text-align: left; padding: 10px; cursor: pointer; border-bottom: 1px solid #ccc; text-decoration: none; font-size: 16px !important; user-select: none; background-color: #ccc;"<%}else{%>style="word-break: break-word; text-align: left; padding: 10px; cursor: pointer; border-bottom: 1px solid #ccc; text-decoration: none; font-size: 16px !important; user-select: none"<%}%>><%- faq_category[i].title %></div>
                            <% } %>
                        </div>
                        <div class="faq-container">
                            <div class="category-faq-container">
                                <% for(var i=0; i < faq_category.length; i++) { %>
                                    <% if(i === 0) {%>
                                        <div id="dung">
                                            <div id="<%- faq_category[i].title %>" class="faq-category-title"><%- faq_category[i].title %></div>
                                            <% for(var j=0; j < faq_category[i].faqs.length; j++) { %>
                                                <div class="faq-main-content">
                                                    <div class="faq-question-title-3" onclick="showHideContent(this)">
                                                        <span class="listed-faq" value><%= faq_category[i].faqs[j].title %></span>
                                                        <svg class="svg-plus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                        <svg class="svg-minus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                    </div>
                                                    <div class="faq-answer-content ">
                                                        <%- faq_category[i].faqs[j].content %>
                                                    </div>
                                                </div>
                                            <%}%>
                                        </div>
                                    <% } %>
                                    <div style="display: none;" id="faq<%- faq_category[i].title %>">
                                        <div id="<%- faq_category[i].title %>" class="faq-category-title"><%- faq_category[i].title %></div>
                                        <% for(var j=0; j < faq_category[i].faqs.length; j++) { %>
                                            <div class="faq-main-content">
                                                <div class="faq-question-title-3" onclick="showHideContent(this)">
                                                    <span class="listed-faq" value><%= faq_category[i].faqs[j].title %></span>
                                                    <svg class="svg-plus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                    <svg class="svg-minus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                </div>
                                                <div id="faq-answer-content" class="faq-answer-content ">
                                                    <%- faq_category[i].faqs[j].content %>
                                                </div>
                                            </div>
                                        <%}%>
                                    </div>
                                <% } %>
                            </div>
                            <div class="category-faq-search">
                                <% for(var i=0; i < faq_category.length; i++) { %>
                                    <div>
                                        <div class="faq-category-search"><%- faq_category[i].title %></div>
                                        <% for(var j=0; j < faq_category[i].faqs.length; j++) { %>
                                            <div class="faq-main-content">
                                                <div class="faq-question-title-3" onclick="showHideContent(this)">
                                                    <span class="listed-faq"><%= faq_category[i].faqs[j].title %></span>
                                                    <svg class="svg-plus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                    <svg class="svg-minus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                                                </div>
                                                <div class="faq-answer-content ">
                                                    <%- faq_category[i].faqs[j].content %>
                                                </div>
                                            </div>
                                        <%}%>
                                    </div>
                                <% } %>
                            </div>
                            <div id="not-found-text">
                                <% if(setting.data.search_not_found) {%>
                                    <%- setting.data.search_not_found %>
                                <% } %>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        <% }
        else{ %>
            <div class="faq-dont-category">
                <% for(var j=0; j < faqs.length; j++) { %>
                    <div class="faq-main-content">
                        <div class="faq-question-title-3" onclick="showHideContent(this)">
                            <span class="listed-faq"><%= faqs[j].title %></span>
                            <svg class="svg-plus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                            <svg class="svg-minus" fill="<%= setting.templateSetting.faq_font_color %>" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>
                        </div>
                        <div class="faq-answer-content ">
                            <%- faqs[j].content %>
                        </div>
                    </div>
                <%}%>
            </div>
        <% } %>
        <% if(setting.data.show_footer_text) {%>
            <div class="faq-footer-text">
                <% if(setting.data.footer_text_content) {%>
                    <%- setting.data.footer_text_content %>
                <% } %>
            </div>
        <% } %>
    </div>
</div>
<script>
    var categoryName = []
    function changeCategory(s){
        categoryName.push(s)
        console.log(document.getElementsByClassName('faq-answer-content').length)
        for(i = 0; i < document.getElementsByClassName('faq-answer-content').length; i++){
            document.getElementsByClassName('faq-answer-content')[i].style.display = 'none'
            document.getElementsByClassName('svg-plus')[i].style.opacity = '1'
            document.getElementsByClassName('svg-plus')[i].style.transform = "rotate(0deg)";
            document.getElementsByClassName('svg-plus')[i].style.transition  = "all .7s";
            document.getElementsByClassName('svg-minus')[i].style.transform = "rotate(0deg)";
            document.getElementsByClassName('svg-minus')[i].style.transition  = "ease-in .3s";
            document.getElementsByClassName('svg-minus')[i].style.opacity = '0'
        }
        for(let i = 0; i < categoryName.length; i++){
            if(categoryName[i] === document.getElementById(s).innerHTML){
                document.getElementById(`faq${categoryName[i]}`).style.display = 'block'
                document.getElementById(`faq-category${categoryName[i]}`).style.backgroundColor = '#ccc'
            }
            else{
                document.getElementById(`faq${categoryName[i]}`).style.display = 'none'
                document.getElementById(`faq-category${categoryName[i]}`).style.backgroundColor = '#fff'
            }
            if(categoryName.length > 0){
                document.getElementById('dung').style.display= "none"
            }
            if(categoryName.length === 1){
                document.getElementsByClassName('category-bar-item')[0].style.backgroundColor = '#fff'
            }
        }

    }
    function showHideContent(el) {
        var content = el.nextElementSibling;
        var svgRight = el.getElementsByClassName('svg-plus')
        var svgDown = el.getElementsByClassName('svg-minus')
        if (content.style.display === "block") {
            content.style.display = "none";
        } 
        else {
            content.style.display = "block";
        }

        if (svgRight[0].style.opacity === "0") {
            svgRight[0].style.opacity = "1";
            svgRight[0].style.transform = "rotate(0deg)";
            svgRight[0].style.transition  = "all .7s";
        } 
        else {
            console.log('open')
            svgRight[0].style.transform = "rotate(180deg)";
            svgRight[0].style.transition  = "all 0s";
            svgRight[0].style.opacity = "0";
        }

        if (svgDown[0].style.opacity === "1") {
            svgDown[0].style.opacity = "0";
            svgDown[0].style.transform = "rotate(0deg)";
            svgDown[0].style.transition  = "all 0s";
        } else {
            console.log('down')
            svgDown[0].style.transform = "rotate(180deg)";
            svgDown[0].style.transition  = "ease-in .3s";
            svgDown[0].style.opacity = "1";
        }
    }
    function simpleSearch() {
        var input = document.getElementById("search-text");
        var filter = input.value.toLowerCase();
        var nodes = document.getElementsByClassName('listed-faq');
        var nodeCategory = document.getElementsByClassName('category-faq-search');
        // console.log(nodeCategory)
        console.log(document.getElementById('search-text').value === '')
        if(document.getElementById('search-text').value === ''){
            document.getElementsByClassName("category-faq-container")[0].style.display = "block"
            document.getElementsByClassName('category-bar')[0].style.display = "flex"
            document.getElementsByClassName('faq-container')[0].style.width = "70%"
            document.getElementsByClassName('category-faq-search')[0].style.display = "none"
            for(i = 0; i < document.getElementsByClassName("faq-category-search").length; i++) {
                document.getElementsByClassName("faq-category-search")[i].style.display = "block"
            }
        }
        else{
            document.getElementsByClassName("category-faq-container")[0].style.display = "none"
            document.getElementsByClassName('category-bar')[0].style.display = "none"
            document.getElementsByClassName('faq-container')[0].style.width = "100%"
            document.getElementsByClassName('category-faq-search')[0].style.display = "block"
            for(i = 0; i < document.getElementsByClassName("faq-category-search").length; i++) {
                document.getElementsByClassName("faq-category-search")[i].style.display = "none"
            }
        }
        var checkexist = true;
        for (i = 0; i < nodes.length; i++) {
            if (nodes[i].innerText.toLowerCase().includes(filter)) {
                nodes[i].parentNode.parentNode.style.display = "block";
                checkexist = false;
            } else {
                nodes[i].parentNode.parentNode.style.display = "none";
            }
        }
        if (checkexist) {
            document.getElementById("not-found-text").style.display = "block";
            document.getElementsByClassName('category-faq-search')[0].style.display = "none";
        } else {
            document.getElementById("not-found-text").style.display = "none";
        }
    }
</script>
<style>
    <% if(setting.templateSetting.width_faqs_accordian) { %>
    .faq-main {
        padding: 0 20px;
        max-width: <%- setting.templateSetting.width_faqs_accordian%>px;
        margin: auto;
    }
    <% } if(setting.templateSetting.image_banner) { %>
    .faq-header {
        display: flex; 
        flex-direction: column; 
        justify-content: space-between;
        min-height: <%- setting.templateSetting.banner_height%>px;
        max-width: 100vw;
        background-image: url('<%- setting.templateSetting.image_banner%>');
        background-repeat: no-repeat;
        background-size: cover;
        background-position-y: center;
        text-align: center; 
    }
    <%} %>

    .faq-header-3 {
        display: flex; 
        flex-direction: column; 
        justify-content: space-between;
        min-height: <%- setting.templateSetting.banner_height%>px;
        max-width: 100vw;
        background-image: url('<%- setting.templateSetting.banner_default%>');
        background-repeat: no-repeat;
        background-size: cover;
        background-position-y: center;
        text-align: center; 
    }
    .category-faq-search{
        display: none; 
        border-top: 1px solid #ccc; 
        margin-top: 40px
    }
    .faq-search-input{
        width: 60%; 
        padding: 1rem; 
        border-radius: 4px; 
        outline: none; 
        border: none; 
        font-size: 1.6rem;
    }
    @media only screen and (max-width: 700px) {
        .faq-search-input {
            width: 95%;
        }
    }
    .faq-question-title-3 {
        padding: 10px; 
        display: flex; 
        align-items: center;
        width: 100%; 
        cursor: pointer;
        <% if (setting.templateSetting.faq_font_weight) { %>
            font-weight: <%=  setting.templateSetting.faq_font_weight %>;
        <% } if (setting.templateSetting.faq_font_color) { %>
            color: <%=  setting.templateSetting.faq_font_color %>;
        <% } if (setting.templateSetting.faq_font_size) { %>
            font-size: <%=  setting.templateSetting.faq_font_size %>px;
        <% } if (setting.templateSetting.faq_font_family) { %>
            font-family: <%=  setting.templateSetting.faq_font_family %>;
        <% } %>
    }
    .svg-plus{
        position: relative;
        left: 11.2px;
        opacity: 1;
        height: 14px;
        width: 14px;
    }
    .svg-minus{
        opacity: 0;
        height: 14px;
        width: 14px;
    }
    .category-bar{
        border-top: 1px solid #ccc ;
        display: flex; 
        flex-direction: column; 
        flex-wrap: wrap; 
        margin: calc(<%=  setting.templateSetting.category_font_size %>px*1.8 + 40px) 30px 30px 0; 
        width: 30%
    }
    .faq-category-search{
        border-bottom: 1px solid #ccc; 
        width: 100%; 
        margin-top: 30px; 
        padding-bottom: 10px
    }
    .faq-page-title{
        color: #fff;
        margin:0; 
        padding: 20px 0; 
        font-weight: 600;
    }
    .faq-main-content{
        border-bottom: 1px solid #ccc;
    }
    .faq-dont-category{
        margin: 60px 0 30px 0; 
        border-top: 1px solid #ccc;
    }
    .faq-search{
        text-align: center; 
        padding: 2rem;
    }
    .faq-search-no-title{
        text-align: center; 
        padding: 2rem; 
        margin-top: 70px;
    }
    .faq-intro-text{
        text-align: center; 
        padding: 10px 0; 
        color: #fff; 
        font-size: 18px
    }
    .faq-category-title{
        border-bottom: 1px solid #ccc; 
        width: 100%; 
        margin-top: 30px; 
        padding-bottom: 10px
    }
    #not-found-text{
        display: none; 
        text-align: center; 
        font-size: 3rem; 
        margin-top: 100px;
    }
    .container{
        display: flex; 
        width: 100%;
    }
    .faq-container{
        width: 70%;
    }
    .faq-footer-text{
        text-align: center;
        margin-top: 50px; 
        padding: 10px 0; 
        font-size: 18px
    }
    .listed-faq{
        width: 100%;
        user-select: none;
    }
    .faq-answer-content{
        display: none; 
        margin:0; 
        margin-bottom: 6px; 
        padding: 10px;
        position: relative;
    }
    @media only screen and (max-width: 768px) {
        .container{
            flex-direction: column;
        }
        .faq-container{
            width: 100% !important;
        }
        .category-bar{
            width: 100% !important;
            margin: 0 !important;
            margin-top: 40px !important;
        }
    }
    <%
        if(setting.templateSetting.custom_css) { %>
            <%- setting.templateSetting.custom_css%>
            <%= setting.templateSetting.custom_css%>
        <%}
    %>
</style>